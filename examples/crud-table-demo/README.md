# Snap Studio CRUD Table Demo

è¿™æ˜¯ä¸€ä¸ªåŸºäº Snap Studio ä½ä»£ç æ¸²æŸ“å¼•æ“æ„å»ºçš„å®Œæ•´ç”¨æˆ·ç®¡ç†ç³»ç»Ÿç¤ºä¾‹ï¼Œå±•ç¤ºäº†å¦‚ä½•é€šè¿‡**å•ä¸€ JSON é…ç½®æ–‡ä»¶**å®ç°è¡¨æ ¼çš„å¢åˆ æ”¹æŸ¥åŠŸèƒ½ã€‚

## âœ¨ é‡æ„äº®ç‚¹

ğŸ¯ **æç®€æ¶æ„** - åˆ é™¤äº†æ‰€æœ‰å¤šä½™çš„ç»„ä»¶æ–‡ä»¶ï¼Œåªä¿ç•™æ ¸å¿ƒçš„ç”¨æˆ·ç®¡ç†åŠŸèƒ½  
ğŸ“„ **å•æ–‡ä»¶é…ç½®** - æ•´ä¸ªåº”ç”¨ç”± `user-management.config.json` ä¸€ä¸ªæ–‡ä»¶é©±åŠ¨  
ğŸš€ **é›¶ä»£ç å¼€å‘** - è¡¨æ ¼åˆ—ã€æœç´¢å­—æ®µã€æŒ‰é’®ç­‰éƒ½é€šè¿‡ JSON é…ç½®ï¼Œæ— éœ€ç¼–å†™ç»„ä»¶ä»£ç   
ğŸ”§ **é«˜åº¦å¯é…ç½®** - æ‰€æœ‰UIå…ƒç´ éƒ½å¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶è½»æ¾è°ƒæ•´  
âš¡ **å†…ç½®æ•°æ®æº** - ä½¿ç”¨å¼•æ“å†…ç½®çš„ `MOCK`ã€`API_REQUEST` ç­‰æ•°æ®æºç±»å‹  
ğŸ›ï¸ **å†…ç½®Actions** - ä½¿ç”¨ `FETCH_DATA`ã€`CALL_API` ç­‰é€šç”¨actionï¼Œæ— éœ€è‡ªå®šä¹‰

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

### âœ… å®Œæ•´çš„ CRUD æ“ä½œ
- **æ–°å¢ç”¨æˆ·** - æ”¯æŒå†…è”ç¼–è¾‘åˆ›å»ºæ–°ç”¨æˆ·
- **ç¼–è¾‘ç”¨æˆ·** - æ”¯æŒå†…è”ç¼–è¾‘ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯
- **åˆ é™¤ç”¨æˆ·** - æ”¯æŒå•ä¸ªåˆ é™¤å’Œæ‰¹é‡åˆ é™¤
- **æŸ¥è¯¢ç”¨æˆ·** - æ”¯æŒå¤šæ¡ä»¶æœç´¢å’Œç­›é€‰

### âœ… é«˜çº§è¡¨æ ¼åŠŸèƒ½
- **å†…è”ç¼–è¾‘** - ç›´æ¥åœ¨è¡¨æ ¼ä¸­ç¼–è¾‘æ•°æ®
- **è¡¨å•éªŒè¯** - æ”¯æŒå­—æ®µéªŒè¯è§„åˆ™
- **æ’åºç­›é€‰** - æ”¯æŒåˆ—æ’åºå’Œç­›é€‰
- **åˆ†é¡µå¯¼èˆª** - æ”¯æŒåˆ†é¡µæ˜¾ç¤ºå’Œé¡µé¢å¤§å°è°ƒæ•´
- **è¡Œé€‰æ‹©** - æ”¯æŒå•é€‰å’Œå¤šé€‰æ“ä½œ
- **æœç´¢åŠŸèƒ½** - æ”¯æŒå¤šå­—æ®µç»„åˆæœç´¢

### âœ… ä½ä»£ç ç‰¹æ€§
- **å•ä¸€é…ç½®æ–‡ä»¶** - æ•´ä¸ªé¡µé¢ç”±ä¸€ä¸ª JSON æ–‡ä»¶é©±åŠ¨
- **å®Œå…¨å¯é…ç½®** - è¡¨æ ¼åˆ—ã€æœç´¢å­—æ®µã€æŒ‰é’®éƒ½å¯é€šè¿‡é…ç½®ä¿®æ”¹
- **é›¶ä»£ç ç»„ä»¶** - æ— éœ€ç¼–å†™ React ç»„ä»¶ä»£ç 
- **å“åº”å¼çŠ¶æ€ç®¡ç†** - è‡ªåŠ¨åŒæ­¥æ•°æ®çŠ¶æ€
- **æ™ºèƒ½åŠ è½½ç­–ç•¥** - æ”¯æŒæŒ‰éœ€åŠ è½½å’Œé¢„åŠ è½½
- **äº‹ä»¶é©±åŠ¨** - å£°æ˜å¼äº‹ä»¶å¤„ç†å’ŒåŠ¨ä½œæ‰§è¡Œ

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```
ğŸ“¦ examples/crud-table-demo/
â”œâ”€â”€ ğŸ“„ package.json                          # é¡¹ç›®é…ç½®
â”œâ”€â”€ ğŸ“„ vite.config.ts                       # Vite æ„å»ºé…ç½®
â”œâ”€â”€ ğŸ“„ tsconfig.json                        # TypeScript é…ç½®
â”œâ”€â”€ ğŸ“„ index.html                           # HTML å…¥å£
â””â”€â”€ ğŸ“ src/
    â”œâ”€â”€ ğŸ“„ main.tsx                         # åº”ç”¨å…¥å£
    â”œâ”€â”€ ğŸ“„ App.tsx                          # ä¸»åº”ç”¨ç»„ä»¶ (ç®€åŒ–ç‰ˆ)
    â”œâ”€â”€ ğŸ“„ user-management.config.json      # ğŸ¯ æ ¸å¿ƒé…ç½®æ–‡ä»¶
    â”œâ”€â”€ ğŸ“„ component-registry.ts            # ç»„ä»¶æ³¨å†Œè¡¨
    â”œâ”€â”€ ğŸ“„ mock-data.ts                    # æ¨¡æ‹Ÿæ•°æ®å’ŒAPI
    â”œâ”€â”€ ğŸ“ components/
    â”‚   â””â”€â”€ ğŸ“„ enhanced-page-container.tsx  # å¢å¼ºé¡µé¢å®¹å™¨
    â””â”€â”€ ğŸ“ schemas/
        â””â”€â”€ ğŸ“„ action-handlers.ts           # è‡ªå®šä¹‰è¡Œä¸ºå¤„ç†å™¨
```

### æ ¸å¿ƒç‰¹ç‚¹
- **å•æ–‡ä»¶é…ç½®**: `user-management.config.json` æ˜¯å”¯ä¸€çš„é…ç½®æ¥æº
- **ç®€åŒ–æ¶æ„**: åˆ é™¤äº†æ‰€æœ‰ä¸å¿…è¦çš„ç»„ä»¶æ–‡ä»¶
- **çº¯å£°æ˜å¼**: é€šè¿‡ JSON é…ç½®å®ç°æ‰€æœ‰åŠŸèƒ½ï¼Œæ— éœ€ç¼–å†™ç»„ä»¶ä»£ç 

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•å®‰è£…ä¾èµ–
pnpm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# è¿›å…¥ç¤ºä¾‹ç›®å½•
cd examples/crud-table-demo

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
pnpm dev
```

### 3. è®¿é—®åº”ç”¨

æ‰“å¼€æµè§ˆå™¨è®¿é—® [http://localhost:3000](http://localhost:3000)

## ğŸ“‹ ç”¨æˆ·æ“ä½œæŒ‡å—

### æ–°å¢ç”¨æˆ·
1. ç‚¹å‡»è¡¨æ ¼ä¸Šæ–¹çš„ **"æ–°å¢ç”¨æˆ·"** æŒ‰é’®
2. è¡¨æ ¼é¡¶éƒ¨ä¼šå‡ºç°ä¸€è¡Œå¯ç¼–è¾‘çš„æ–°è®°å½•
3. å¡«å†™ç”¨æˆ·ä¿¡æ¯ï¼ˆå§“åã€é‚®ç®±ã€æ‰‹æœºå·ç­‰ï¼‰
4. ç‚¹å‡» **"ä¿å­˜"** å®Œæˆåˆ›å»ºï¼Œæˆ–ç‚¹å‡» **"å–æ¶ˆ"** æ”¾å¼ƒåˆ›å»º

### ç¼–è¾‘ç”¨æˆ·
1. ç‚¹å‡»ç”¨æˆ·è¡Œçš„ **"ç¼–è¾‘"** æŒ‰é’®
2. è¯¥è¡Œè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œå­—æ®µå˜ä¸ºå¯ç¼–è¾‘çŠ¶æ€
3. ä¿®æ”¹éœ€è¦çš„ä¿¡æ¯
4. ç‚¹å‡» **"ä¿å­˜"** å®Œæˆä¿®æ”¹ï¼Œæˆ–ç‚¹å‡» **"å–æ¶ˆ"** æ”¾å¼ƒä¿®æ”¹

### åˆ é™¤ç”¨æˆ·
- **å•ä¸ªåˆ é™¤**: ç‚¹å‡»ç”¨æˆ·è¡Œçš„ **"åˆ é™¤"** æŒ‰é’®ï¼Œç¡®è®¤ååˆ é™¤
- **æ‰¹é‡åˆ é™¤**: é€‰ä¸­å¤šä¸ªç”¨æˆ·ï¼Œç‚¹å‡» **"åˆ é™¤é€‰ä¸­"** æŒ‰é’®

### æœç´¢ç­›é€‰
1. ç‚¹å‡»è¡¨æ ¼å³ä¸Šè§’çš„ **"æœç´¢"** æŒ‰é’®å±•å¼€æœç´¢è¡¨å•
2. åœ¨æœç´¢è¡¨å•ä¸­è¾“å…¥ç­›é€‰æ¡ä»¶ï¼š
   - **ç”¨æˆ·å/é‚®ç®±**: æ¨¡ç³Šæœç´¢ç”¨æˆ·åæˆ–é‚®ç®±
   - **éƒ¨é—¨**: é€‰æ‹©ç‰¹å®šéƒ¨é—¨
   - **çŠ¶æ€**: é€‰æ‹©åœ¨èŒæˆ–ç¦»èŒçŠ¶æ€
3. ç‚¹å‡» **"æœç´¢"** æ‰§è¡Œç­›é€‰ï¼Œæˆ–ç‚¹å‡» **"é‡ç½®"** æ¸…ç©ºæ¡ä»¶

### åˆ†é¡µå¯¼èˆª
- ä½¿ç”¨è¡¨æ ¼åº•éƒ¨çš„åˆ†é¡µç»„ä»¶åˆ‡æ¢é¡µé¢
- å¯ä»¥è°ƒæ•´æ¯é¡µæ˜¾ç¤ºçš„è®°å½•æ•°é‡
- æ”¯æŒå¿«é€Ÿè·³è½¬åˆ°æŒ‡å®šé¡µé¢

## ğŸ”§ æ ¸å¿ƒé…ç½®è§£æ

### JSON é…ç½®æ–‡ä»¶ï¼š`user-management.config.json`

è¿™æ˜¯æ•´ä¸ªåº”ç”¨çš„**å”¯ä¸€é…ç½®æ¥æº**ï¼Œæ‰€æœ‰çš„é¡µé¢åŠŸèƒ½éƒ½é€šè¿‡è¿™ä¸ªæ–‡ä»¶å®šä¹‰ï¼š

```json
{
  "metadata": {
    "pageId": "user_management_page",
    "name": "ç”¨æˆ·ç®¡ç†",
    "version": "1.0.0"
  },
  
  "components": {
    "comp_user_table": {
      "componentType": "Table",
      "properties": {
        "columns": [
          {
            "title": "å§“å",
            "dataIndex": "name",
            "editable": true,
            "editType": "input",
            "rules": [{"required": true, "message": "å§“åä¸èƒ½ä¸ºç©º"}]
          }
        ],
        "toolbarActions": [
          {
            "type": "create",
            "text": "æ–°å¢ç”¨æˆ·",
            "actionId": "act_create_user"
          }
        ],
        "search": {
          "enabled": true,
          "fields": [
            {
              "name": "name",
              "label": "ç”¨æˆ·å/é‚®ç®±",
              "type": "input",
              "placeholder": "è¯·è¾“å…¥ç”¨æˆ·åæˆ–é‚®ç®±"
            }
          ]
        }
      }
    }
  },
  
  "dataSource": {
    "ds_user_list": {"type": "static", "config": {"value": []}}
  },
  
  "actions": {
    "act_create_user": {"type": "CUSTOM", "config": {"handler": "act_create_user"}}
  },
  
  "initialState": {
    "userList": [],
    "loading": false
  }
}
```

### é…ç½®è¯´æ˜
- **è¡¨æ ¼åˆ—**: `components.comp_user_table.properties.columns` - å®šä¹‰æ‰€æœ‰è¡¨æ ¼åˆ—
- **æœç´¢å­—æ®µ**: `components.comp_user_table.properties.search.fields` - å®šä¹‰æœç´¢è¡¨å•
- **æ“ä½œæŒ‰é’®**: `components.comp_user_table.properties.toolbarActions` - å®šä¹‰å·¥å…·æ æŒ‰é’®
- **è¡Œæ“ä½œ**: `components.comp_user_table.properties.rowActions` - å®šä¹‰è¡Œçº§æ“ä½œ

### æ•°æ®æºç±»å‹
ç°åœ¨ä½¿ç”¨çš„æ˜¯å†…ç½®çš„æ•°æ®æºç±»å‹ï¼Œæ— éœ€è‡ªå®šä¹‰ï¼š

```json
{
  "dataSource": {
    "ds_user_list": {
      "type": "MOCK",              // æ¨¡æ‹Ÿæ•°æ®ï¼Œæ”¯æŒå»¶è¿Ÿå’Œé”™è¯¯ç‡
      "config": {
        "data": [...],             // æ¨¡æ‹Ÿæ•°æ®
        "delay": 500,              // æ¨¡æ‹Ÿç½‘ç»œå»¶è¿Ÿ500ms
        "simulateError": false     // æ˜¯å¦æ¨¡æ‹Ÿé”™è¯¯
      }
    }
  }
}
```

ä¹Ÿæ”¯æŒçœŸæ­£çš„APIè°ƒç”¨ï¼ˆå‚è§ `api-config-example.json`ï¼‰ï¼š
```json
{
  "dataSource": {
    "ds_user_list": {
      "type": "API_REQUEST",       // çœŸå®APIè°ƒç”¨
      "config": {
        "url": "/api/users",
        "method": "GET",
        "headers": {...},
        "timeout": 10000
      },
      "cache": {...},              // ç¼“å­˜é…ç½®
      "retry": {...}               // é‡è¯•é…ç½®
    }
  }
}
```

### Actionç±»å‹
æ”¯æŒå¤šç§å†…ç½®actionç±»å‹ï¼š

```json
{
  "actions": {
    "act_fetch_users": {
      "type": "FETCH_DATA",        // å†…ç½®çš„æ•°æ®è·å–action
      "config": {
        "dataSourceId": "ds_user_list",
        "resultPath": "userList",  // ç»“æœå­˜å‚¨è·¯å¾„
        "showLoading": true,       // æ˜¾ç¤ºåŠ è½½çŠ¶æ€
        "loadingPath": "loading"   // åŠ è½½çŠ¶æ€è·¯å¾„
      }
    },
    "act_show_message": {
      "type": "SHOW_MESSAGE",      // å†…ç½®çš„æ¶ˆæ¯æ˜¾ç¤ºaction
      "config": {
        "type": "success",
        "message": "æ“ä½œæˆåŠŸï¼",
        "duration": 3000
      }
    },
    "act_call_api": {
      "type": "CALL_API",          // å†…ç½®çš„APIè°ƒç”¨action
      "config": {
        "endpoint": "/api/users",
        "method": "POST",
        "body": "{{payload}}"
      }
    }
  }
}
```

### å®Œå…¨å†…ç½®ç‰ˆæœ¬
å‚è§ `pure-builtin-config.json` - å±•ç¤ºå¦‚ä½•å®Œå…¨ä½¿ç”¨å†…ç½®åŠŸèƒ½ï¼Œæ— éœ€ä»»ä½•è‡ªå®šä¹‰ä»£ç ã€‚

### è¡¨æ ¼åˆ—é…ç½®

```typescript
{
  title: 'å§“å',
  dataIndex: 'name',
  editable: true,                      // å¯ç¼–è¾‘
  editType: 'input',                   // ç¼–è¾‘ç±»å‹
  rules: [                             // éªŒè¯è§„åˆ™
    { required: true, message: 'å§“åä¸èƒ½ä¸ºç©º' },
    { min: 2, max: 20, message: 'å§“åé•¿åº¦åœ¨2-20ä¸ªå­—ç¬¦ä¹‹é—´' }
  ]
}
```

### è¡Œä¸ºå¤„ç†å™¨

```typescript
// è‡ªå®šä¹‰è¡Œä¸ºå¤„ç†å™¨
'act_create_user': {
  type: 'CUSTOM',
  config: {
    handler: async (context, record) => {
      const { stateManager } = context;
      // æ‰§è¡Œåˆ›å»ºç”¨æˆ·é€»è¾‘
      await mockDataStore.createUser(record);
      // æ›´æ–°çŠ¶æ€
      stateManager.set('userList', newData);
    }
  }
}
```

## ğŸ¨ è‡ªå®šä¹‰æ‰©å±•

### æ·»åŠ æ–°çš„è¡¨æ ¼åˆ—

åœ¨ `user-management.config.json` ä¸­çš„ `columns` æ•°ç»„æ·»åŠ æ–°åˆ—ï¼š

```json
{
  "title": "å¹´é¾„",
  "dataIndex": "age",
  "key": "age",
  "width": 80,
  "editable": true,
  "editType": "number",
  "rules": [
    {"required": true, "message": "å¹´é¾„ä¸èƒ½ä¸ºç©º"},
    {"min": 18, "max": 65, "message": "å¹´é¾„åœ¨18-65ä¹‹é—´"}
  ]
}
```

### æ·»åŠ æ–°çš„æœç´¢å­—æ®µ

åœ¨ `search.fields` æ•°ç»„ä¸­æ·»åŠ ï¼š

```json
{
  "name": "age",
  "label": "å¹´é¾„",
  "type": "input",
  "placeholder": "è¯·è¾“å…¥å¹´é¾„"
}
```

### æ·»åŠ æ–°çš„æ“ä½œæŒ‰é’®

åœ¨ `rowActions` æˆ– `toolbarActions` ä¸­æ·»åŠ ï¼š

```json
{
  "type": "custom",
  "text": "å¯¼å‡º",
  "actionId": "act_export_user"
}
```

### ä¿®æ”¹éƒ¨é—¨é€‰é¡¹

ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„éƒ¨é—¨æ•°æ®ï¼š

```json
{
  "dataSource": {
    "ds_departments": {
      "type": "static",
      "config": {
        "value": [
          {"label": "æŠ€æœ¯éƒ¨", "value": "tech"},
          {"label": "æ–°éƒ¨é—¨", "value": "new_dept"}
        ]
      }
    }
  }
}
```

## ğŸ” è°ƒè¯•æŒ‡å—

### å¯ç”¨è°ƒè¯•æ¨¡å¼

åœ¨ `App.tsx` ä¸­è®¾ç½®ï¼š

```typescript
engineConfig={{
  debug: true,  // å¯ç”¨è°ƒè¯•æ¨¡å¼
  // ...
}}
```

### æŸ¥çœ‹è°ƒè¯•ä¿¡æ¯

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. æŸ¥çœ‹ Console é¢æ¿çš„æ—¥å¿—è¾“å‡º
3. å¯ä»¥çœ‹åˆ°é¡µé¢åˆå§‹åŒ–ã€æ•°æ®åŠ è½½ã€è¡Œä¸ºæ‰§è¡Œç­‰è¯¦ç»†ä¿¡æ¯

### å¸¸è§é—®é¢˜

1. **ç»„ä»¶æœªæ³¨å†Œ**: æ£€æŸ¥ `component-registry.ts` ä¸­æ˜¯å¦æ­£ç¡®æ³¨å†Œç»„ä»¶
2. **æ•°æ®æœªåŠ è½½**: æ£€æŸ¥ `dataSource` é…ç½®å’Œ `loadStrategy`
3. **è¡Œä¸ºæœªæ‰§è¡Œ**: æ£€æŸ¥ `actions` é…ç½®å’Œ action handlers æ³¨å†Œ

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Snap Studio æ ¸å¿ƒæ¶æ„](../../packages/core/README.md)
- [React æ¸²æŸ“å™¨ä½¿ç”¨æŒ‡å—](../../packages/react/README.md)  
- [UI ç»„ä»¶åº“æ–‡æ¡£](../../packages/ui-components/README.md)
- [Schema é…ç½®è§„èŒƒ](../../packages/schema/README.md)

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥æ”¹è¿›è¿™ä¸ªç¤ºä¾‹ï¼

---

**Snap Studio** - è®©ä½ä»£ç å¼€å‘æ›´ç®€å•ã€æ›´å¼ºå¤§ï¼ ğŸš€